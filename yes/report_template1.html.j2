<!DOCTYPE html>
<html>
<head>
  <title>Ansible Playbook Report</title>
  <style>
    table {
      border-collapse: collapse;
      width: 100%;
    }
    th, td {
      text-align: left;
      padding: 8px;
      border-bottom: 1px solid #ddd;
    }
    th {
      background-color: #4CAF50;
      color: white;
    }
    tr:nth-child(even) {background-color: #f2f2f2;}
  </style>
</head>
<body>
  <h1>Ansible Playbook Report</h1>
  {% for command in command_outputs_json %}
    {% set command_dict = command | from_json %}
    <h2>{{ command_dict.item }}</h2>
    {% if command_dict.rc == 0 %}
      <pre>{{ command_dict.stdout }}</pre>
    {% else %}
      <pre style="color: red">{{ command_dict.stderr }}</pre>
    {% endif %}
  {% endfor %}
</body>
</html>
